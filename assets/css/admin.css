/**
 * WP Easy Role Manager - Admin Styles
 *
 * Uses WPEA Framework tokens and light-dark() CSS function
 *
 * @package WP_Easy\RoleManager
 * @version 1.0.0
 */

/* Main Admin Wrapper - acts as container for style queries */
.wpe-rm-admin {
    container-type: inline-size;
    max-width: 1600px;
    margin: var(--wpea-space--lg) var(--wpea-space--lg) 0 0;
    background: light-dark(var(--wpea-color--neutral-l-9), var(--wpea-color--neutral-l-9));
    padding: var(--wpea-space--lg);
    border-radius: var(--wpea-radius--md);
    min-height: calc(100vh - 100px);
}

/* Compact Mode - set density variable for WPEA container style query */
/* Handles both: PHP adds class to wrapper, JS adds class to body */
.wpe-rm-admin.wpea-compact,
body.wpea-compact .wpe-rm-admin {
    --wpea-density: compact;
}

/* App Container - minimal WordPress admin compatibility */
#wpe-rm-app {
    margin-top: var(--wpea-space--lg);
}

/* Card backgrounds - elevated from app background */
.wpe-rm-admin .wpea-card {
    background: light-dark(var(--wpea-color--white), var(--wpea-color--neutral-l-8));
}

/* Loading State */
.wpe-rm-loading {
    padding: var(--wpea-space--2xl);
    text-align: center;
    color: var(--wpea-surface--text-muted);
}

/* Spinner Animation */
@keyframes wpea-spin {
    to { transform: rotate(360deg); }
}

.wpea-spinner {
    display: inline-block;
    width: 32px;
    height: 32px;
    border: 3px solid light-dark(var(--wpea-color--neutral-l-7), var(--wpea-color--neutral-l-5));
    border-top-color: var(--wpea-color--primary);
    border-radius: 50%;
    animation: wpea-spin 0.8s linear infinite;
}

.wpea-spinner--sm {
    width: 16px;
    height: 16px;
    border-width: 2px;
}

.wpea-spinner--lg {
    width: 48px;
    height: 48px;
    border-width: 4px;
}

/* Header with Logo */
.wpe-rm-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--wpea-space--md);
}

.wpe-rm-logo {
    height: 40px;
    width: auto;
    flex-shrink: 0;
}

/* Logo visibility - light logo for dark mode, dark logo for light mode */
@media (prefers-color-scheme: light) {
    :root:not([style*="dark"]) .wpe-rm-logo-light { display: none; }
    :root:not([style*="dark"]) .wpe-rm-logo-dark { display: block; }
}

@media (prefers-color-scheme: dark) {
    :root:not([style*="light only"]) .wpe-rm-logo-light { display: block; }
    :root:not([style*="light only"]) .wpe-rm-logo-dark { display: none; }
}

/* Forced light mode */
:root[style*="light only"] .wpe-rm-logo-light { display: none !important; }
:root[style*="light only"] .wpe-rm-logo-dark { display: block !important; }

/* Forced dark mode */
:root[style*="dark only"] .wpe-rm-logo-light { display: block !important; }
:root[style*="dark only"] .wpe-rm-logo-dark { display: none !important; }

/* Badge variants using WPEA tokens */
.badge.core {
    background: var(--wpea-badge-core-bg);
    color: var(--wpea-badge-core-text);
}

.badge.external {
    background: var(--wpea-badge-external-bg);
    color: var(--wpea-badge-external-text);
}

.badge.disabled {
    background: light-dark(
        var(--wpea-color--danger-l-9),
        color-mix(in oklab, var(--wpea-color--danger), transparent 70%)
    );
    color: var(--wpea-color--danger);
    opacity: 0.7;
}

/* Capability cell backgrounds and badge tokens using light-dark() */
:root {
    --wpea-cap-granted-bg: light-dark(
        var(--wpea-color--success-l-9),
        color-mix(in oklab, var(--wpea-color--success), transparent 75%)
    );
    --wpea-cap-denied-bg: light-dark(
        var(--wpea-color--danger-l-9),
        color-mix(in oklab, var(--wpea-color--danger), transparent 75%)
    );
    --wpea-badge-core-bg: light-dark(
        var(--wpea-color--neutral-l-8),
        var(--wpea-color--neutral-d-6)
    );
    --wpea-badge-core-text: light-dark(
        var(--wpea-surface--text),
        var(--wpea-color--white)
    );
    --wpea-badge-external-bg: light-dark(
        var(--wpea-color--warning-l-9),
        color-mix(in oklab, var(--wpea-color--warning), transparent 65%)
    );
    --wpea-badge-external-text: light-dark(
        var(--wpea-color--warning-d-2),
        var(--wpea-color--warning-l-3)
    );
}

/* Table Wrapper with Overflow */
.wpea-table-wrapper {
    overflow: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--wpea-scrollbar-thumb) var(--wpea-scrollbar-track);
}

/* Top Scrollbar */
.wpea-top-scrollbar {
    overflow-x: auto;
    overflow-y: hidden;
    height: 12px;
    margin-bottom: var(--wpea-space--xs);
    scrollbar-width: thin;
    scrollbar-color: var(--wpea-scrollbar-thumb) var(--wpea-scrollbar-track);
}

.wpea-top-scrollbar::-webkit-scrollbar {
    width: 12px;
    height: 12px;
}

.wpea-top-scrollbar::-webkit-scrollbar-track {
    background: var(--wpea-scrollbar-track);
    border-radius: var(--wpea-radius--sm);
}

.wpea-top-scrollbar::-webkit-scrollbar-thumb {
    background: var(--wpea-scrollbar-thumb);
    border-radius: var(--wpea-radius--sm);
    border: 2px solid var(--wpea-scrollbar-track);
}

.wpea-top-scrollbar::-webkit-scrollbar-thumb:hover {
    background: var(--wpea-scrollbar-thumb-hover);
}

/* Custom Scrollbar Styling */
.wpea-table-wrapper,
.wpea-card {
    scrollbar-width: thin;
    scrollbar-color: var(--wpea-scrollbar-thumb) var(--wpea-scrollbar-track);
}

.wpea-table-wrapper::-webkit-scrollbar,
.wpea-card::-webkit-scrollbar {
    width: 12px;
    height: 12px;
}

.wpea-table-wrapper::-webkit-scrollbar-track,
.wpea-card::-webkit-scrollbar-track {
    background: var(--wpea-scrollbar-track);
    border-radius: var(--wpea-radius--sm);
}

.wpea-table-wrapper::-webkit-scrollbar-thumb,
.wpea-card::-webkit-scrollbar-thumb {
    background: var(--wpea-scrollbar-thumb);
    border-radius: var(--wpea-radius--sm);
    border: 2px solid var(--wpea-scrollbar-track);
}

.wpea-table-wrapper::-webkit-scrollbar-thumb:hover,
.wpea-card::-webkit-scrollbar-thumb:hover {
    background: var(--wpea-scrollbar-thumb-hover);
}

/* Scrollbar color tokens using light-dark() */
:root {
    --wpea-scrollbar-track: light-dark(
        var(--wpea-color--neutral-l-9),
        var(--wpea-color--neutral-d-9)
    );
    --wpea-scrollbar-thumb: light-dark(
        var(--wpea-color--neutral-l-6),
        var(--wpea-color--neutral-d-5)
    );
    --wpea-scrollbar-thumb-hover: light-dark(
        var(--wpea-color--neutral-l-5),
        var(--wpea-color--neutral-d-4)
    );
}

/* Additional Button Sizes (aliases for convenience) */
.wpea-btn--sm { font-size: var(--wpea-text--sm); padding-block: calc(var(--wpea-space--sm) * .45); padding-inline: var(--wpea-space--sm); }

/* Additional Button Variants (not in base WPEA framework) */
.wpea-btn--danger {
    --_bg: var(--wpea-color--danger);
    --_bg-hover: var(--wpea-color--danger-d-2);
}

.wpea-btn--danger-outline {
    --_bg: transparent;
    --_bg-hover: light-dark(var(--wpea-color--danger-l-9), color-mix(in oklab, var(--wpea-color--danger), transparent 85%));
    --_fg: var(--wpea-color--danger);
    border: 1px solid var(--wpea-color--danger);
}

.wpea-btn--primary-outline {
    --_bg: transparent;
    --_bg-hover: light-dark(var(--wpea-color--primary-l-9), color-mix(in oklab, var(--wpea-color--primary), transparent 85%));
    --_fg: var(--wpea-color--primary);
    border: 1px solid var(--wpea-color--primary);
}

.wpea-btn--success {
    --_bg: var(--wpea-color--success);
    --_bg-hover: var(--wpea-color--success-d-2);
}

.wpea-btn--success-outline {
    --_bg: transparent;
    --_bg-hover: light-dark(var(--wpea-color--success-l-9), color-mix(in oklab, var(--wpea-color--success), transparent 85%));
    --_fg: var(--wpea-color--success);
    border: 1px solid var(--wpea-color--success);
}

/* WordPress Admin Compatibility */
@media (max-width: 782px) {
    .wpe-rm-admin {
        margin: var(--wpea-space--md) var(--wpea-space--md) 0 0;
    }
}
